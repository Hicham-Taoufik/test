<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard - R√©ception</title>
  <!-- Using Consistent Fonts & Font Awesome -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
  <!-- Using Consistent CSS -->
  <style>
    :root {
      --primary: #5d74f2;
      --primary-light: #ebeffe;
      --success: #31c971;
      --success-light: #e0fbea;
      --warning: #ffb648;
      --warning-light: #fff8ec;
      --danger: #ff5a5a;
      --danger-light: #ffeded;
      --gray-100: #f9fafb;
      --gray-200: #f1f3f9;
      --gray-300: #e5e7eb;
      --gray-400: #d1d5db;
      --gray-500: #9ca3af;
      --gray-600: #6b7280;
      --gray-700: #4b5563;
      --gray-800: #374151;
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
      --shadow-md: 0 4px 6px rgba(0,0,0,0.04);
      --border-radius: 8px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--gray-100);
      color: var(--gray-800);
      line-height: 1.5;
      min-height: 100vh;
      padding: 0;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px; /* Add padding to container instead of body */
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 0 30px 0;
      margin-bottom: 30px;
      border-bottom: 1px solid var(--gray-200);
    }

    .header-title {
      color: var(--primary);
      font-size: 1.5rem;
      font-weight: 600;
    }

    .logo {
      color: var(--primary);
      font-weight: 700;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
    }

    .logo i {
      margin-right: 8px;
    }

     .card {
      background: white;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-md);
      overflow: hidden;
      margin-bottom: 25px;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 20px;
      border-bottom: 1px solid var(--gray-200);
    }

    .card-title {
      font-size: 1rem;
      font-weight: 600;
      color: var(--gray-800);
      display: flex;
      align-items: center;
    }

    .card-title i {
      margin-right: 10px;
      color: var(--primary);
    }

    .card-actions { /* Optional: Icon on the right */
      color: white;
      background: var(--primary);
      border-radius: var(--border-radius);
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card-body {
      padding: 20px;
    }

     /* Layout using flexbox for side-by-side cards */
     .flex-row {
      display: flex;
      gap: 25px;
      margin-bottom: 25px;
      flex-wrap: wrap; /* Allow wrapping on smaller screens */
    }

    .flex-col {
      flex: 1; /* Each column takes equal space */
      min-width: 350px; /* Minimum width before wrapping */
    }

    /* Form elements styling */
    label { /* Style labels if needed */
      display: block;
      margin-bottom: 6px;
      font-size: 0.85rem;
      color: var(--gray-600);
    }

    /* Grouping label and input */
    .input-group {
      margin-bottom: 15px;
    }
    /* Keep original form grid for structure inside card */
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 15px;
      margin-bottom: 15px; /* Space before button */
    }


    input[type="text"],
    input[type="date"],
    input[type="tel"], /* Added tel type */
    select {
      width: 100%;
      padding: 10px 12px;
      font-size: 0.9rem;
      border-radius: var(--border-radius);
      border: 1px solid var(--gray-300);
      background: white;
      transition: all 0.2s ease;
      font-family: 'Inter', sans-serif;
    }

    input[type="text"]:focus,
    input[type="date"]:focus,
    input[type="tel"]:focus,
    select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(93, 116, 242, 0.1);
    }
     /* Remove default date icon appearance if needed */
     input[type="date"]::-webkit-calendar-picker-indicator {
        /* Example: Hide default icon */
        /* opacity: 0; */
        /* Or style it */
         opacity: 0.6;
         cursor: pointer;
    }


    /* Checkbox styling */
     .checkbox-label {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9rem;
      color: var(--gray-700);
       margin-bottom: 0; /* Remove bottom margin from label itself */
    }
    .checkbox-label input[type="checkbox"] {
        width: auto; /* Override default width */
        margin-right: 6px;
        /* Make checkbox slightly larger */
        width: 1em;
        height: 1em;
    }
    .mutuelle-group {
        grid-column: span 2; /* Span across grid */
        display: flex;
        flex-direction: column; /* Stack elements */
        gap: 10px;
        /* Align items in the checkbox line */
        & > div:first-child { /* Target the line with checkbox */
            display: flex;
            align-items: center;
        }
    }


    /* Button styling */
    .btn-group {
      display: flex;
      gap: 10px;
      margin-top: 15px;
      justify-content: flex-start; /* Align buttons */
    }

     .btn {
      padding: 8px 16px;
      font-size: 0.85rem;
      font-weight: 500;
      border-radius: var(--border-radius);
      border: none;
      cursor: pointer;
      transition: background-color 0.2s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .btn i {
      margin-right: 6px;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }
    .btn-primary:hover { background: #4a62d8; }

    .btn-success {
      background: var(--success);
      color: white;
    }
    .btn-success:hover { background: #28a960; }

    .btn-secondary { /* Keep secondary for print? or use outline */
        background: var(--gray-600);
        color: white;
    }
     .btn-secondary:hover { background: var(--gray-700); }

    .btn-outline {
      background: white;
      color: var(--primary);
      border: 1px solid var(--gray-300);
    }
    .btn-outline:hover {
      border-color: var(--primary);
      background: var(--primary-light);
    }
     .form-submit-button { /* Specific class for form submit */
         grid-column: span 2; /* Make submit button span grid */
     }

    /* Search bar specific styling */
    .search-bar {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
    }
    .search-bar input { flex-grow: 1; } /* Input takes available space */

    /* Message/Result styling */
    .message {
      padding: 10px;
      border-radius: 6px;
      margin-top: 15px;
      font-size: 0.85rem;
      font-weight: 500;
      display: none; /* Hidden by default */
       grid-column: span 2; /* Span message across form grid */
    }
    .message-success { background: var(--success-light); color: var(--success); }
    .message-warning { background: var(--warning-light); color: var(--warning); }
    .message-error { background: var(--danger-light); color: var(--danger); }

    /* Style for the getResult div itself */
    #getResult {
        margin-top: 20px;
        padding: 0; /* Remove padding if children have it */
        background-color: transparent; /* Make background transparent */
        border-radius: 0;
        border-left: none; /* Remove border */
        display: none; /* Hide initially, shown by JS */
    }
     /* Styling for patient result display */
     .patient-result-container { /* New container for results */
         background-color: var(--gray-100); /* Lighter background */
         padding: 20px;
         border-radius: var(--border-radius);
         border-left: 4px solid var(--primary); /* Accent border */
     }
    .patient-result-info {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 10px 15px; /* Row and column gap */
        margin-bottom: 15px;
    }
     .patient-result-info .info-group { margin-bottom: 0; } /* Remove extra margin */
     .patient-result-qr {
         text-align: center; /* Center QR code and button */
         margin-top: 20px;
     }
     .patient-result-qr img {
         max-width: 200px; /* Smaller QR code */
         display: block;
         margin: 0 auto 15px auto; /* Center and add bottom margin */
         border: 1px solid var(--gray-300);
         padding: 5px;
         background: white; /* Ensure white background for QR code */
     }

    /* Responsive adjustments */
     @media (max-width: 768px) {
      .flex-row {
        flex-direction: column; /* Stack cards */
      }
       .form-grid {
           grid-template-columns: 1fr; /* Single column form on small screens */
       }
       .mutuelle-group, .form-submit-button, .message {
           grid-column: span 1; /* Reset span */
       }
        .patient-result-info {
            grid-template-columns: 1fr; /* Single column results */
        }
    }

  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <h1 class="header-title">üéØ Dashboard R√©ception</h1>
      <div class="logo">
        <i class="fas fa-clinic-medical"></i> MediClinic
      </div>
    </div>

    <!-- Main Content Area -->
    <div class="flex-row">

      <!-- Create Patient Card -->
      <div class="flex-col">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title"><i class="fas fa-user-plus"></i> Cr√©er un Patient</h2>
            <div class="card-actions"><i class="fas fa-pen"></i></div>
          </div>
          <div class="card-body">
            <form id="createForm">
              <div class="form-grid">
                <div class="input-group">
                  <label for="nom">Nom</label>
                  <input id="nom" name="nom" placeholder="Nom de famille" required />
                </div>
                <div class="input-group">
                   <label for="prenom">Pr√©nom</label>
                  <input id="prenom" name="prenom" placeholder="Pr√©nom" required />
                </div>
                <div class="input-group">
                  <label for="cin">CIN</label>
                  <input id="cin" name="cin" placeholder="Carte d'Identit√© Nationale" required />
                </div>
                 <div class="input-group">
                  <label for="telephone">T√©l√©phone</label>
                  <input id="telephone" name="telephone" type="tel" placeholder="Num√©ro de t√©l√©phone" required />
                </div>
                 <div class="input-group">
                  <label for="adresse">Adresse</label>
                  <input id="adresse" name="adresse" placeholder="Adresse compl√®te" required />
                </div>
                 <div class="input-group">
                  <label for="ville">Ville</label>
                  <input id="ville" name="ville" placeholder="Ville" required />
                </div>
                 <div class="input-group">
                   <label for="date_naissance">Date de Naissance</label>
                  <input id="date_naissance" name="date_naissance" type="date" required />
                </div>
                 <div class="input-group">
                   <label for="sexe">Sexe</label>
                  <select id="sexe" name="sexe">
                    <option value="M">Homme</option>
                    <option value="F">Femme</option>
                  </select>
                 </div>
                 <!-- Mutuelle Grouping -->
                 <div class="input-group mutuelle-group">
                    <div> <!-- Container for checkbox and its label -->
                      <input type="checkbox" id="has_insurance" name="has_insurance" style="width: auto; height: auto; margin-right: 8px;" />
                      <label for="has_insurance" class="checkbox-label">A une mutuelle ?</label>
                    </div>
                    <input name="mutuelle" placeholder="Nom Mutuelle (si case coch√©e)" />
                 </div>
                  <!-- Submit button -->
                <div class="form-submit-button">
                   <button type="submit" class="btn btn-success">
                       <i class="fas fa-plus-circle"></i> Cr√©er Patient
                   </button>
                </div>
                <!-- Message Area -->
                <div id="message" class="message"></div>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Search Patient Card -->
      <div class="flex-col">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title"><i class="fas fa-search"></i> Rechercher un Patient</h2>
             <div class="card-actions"><i class="fas fa-users"></i></div>
          </div>
          <div class="card-body">
            <div class="search-bar">
              <input id="getCin" placeholder="Entrer le CIN du patient" />
              <button onclick="getPatient()" class="btn btn-primary">
                <i class="fas fa-search"></i> Rechercher
              </button>
            </div>
            <!-- Result Area -->
            <div id="getResult">
              <!-- Patient details will be injected here by JS -->
            </div>
          </div>
        </div>
      </div>

    </div> <!-- End flex-row -->
  </div> <!-- End container -->

   <!-- IMPORTANT: Place script tag just before closing body tag -->
   <!-- Ensure the 'src' path ('script.js') is correct relative to this HTML file -->
  <script src="script.js" defer></script>

</body>
</html>
